<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Attesa Verifica</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body {
    background: #c3ab63;
    font-family: 'Playfair Display', serif;
    max-width: 700px;
    margin: 4rem auto;
    padding: 2rem;
    color: #215c40;
    text-align: center;
  }
  h1 {
    font-weight: 900;
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }
  p {
    font-size: 1.25rem;
    line-height: 1.6;
  }
  #winnerDisplay {
    font-weight: 700;
    color: green;
    margin-top: 2rem;
    font-size: 1.3rem;
  }
  #confetti-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 10000;
  }
</style>
</head>
<body>
  <h1>Fase di Verifica</h1>
  <p>Grazie per aver completato la Tappa 12!<br/>
     I dati sono stati inviati correttamente.<br/>
     A breve verrà annunciato il vincitore ufficiale.<br/>
     Puoi consultare qui sotto il risultato appena disponibile.</p>

  <div id="winnerDisplay">Caricamento risultato vincitore...</div>

  <canvas id="confetti-canvas"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
  const confettiCanvas = document.getElementById('confetti-canvas');

  async function caricaVincitore() {
    try {
      const response = await fetch('https://TUO_UTENTE.github.io/TUO_REPOSITORY/vincitori.json');
      if (!response.ok) throw new Error('Errore nel recupero dati');
      const data = await response.json();
      document.getElementById('winnerDisplay').textContent = `Vincitore: ${data.vincitore}`;
      
      // Attiva coriandoli quando il vincitore è visualizzato
      festeggia();
    } catch (e) {
      document.getElementById('winnerDisplay').textContent = 'Risultato non disponibile al momento.';
      console.error('Errore caricamento vincitore:', e);
    }
  }

  function festeggia() {
    const myConfetti = confetti.create(confettiCanvas, { resize: true });
    myConfetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 }
    });
  }

  setInterval(caricaVincitore, 60000);
  caricaVincitore();
  </script>

</body>
</html>
